<button class="setting-box" (click)="showPasswordDialog()">
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M9.70878 7.47153C9.81603 7.47153 9.92253 7.44603 10.0215 7.39578L14.8928 4.89678C15.1328 4.77378 15.2805 4.52178 15.2715 4.24953C15.2625 3.97728 15.099 3.73578 14.8515 3.62853L10.0613 1.55553C9.84978 1.46403 9.60603 1.48428 9.41253 1.61178C9.21828 1.73778 9.10053 1.95378 9.09603 2.18703L9.06978 3.67653C5.34153 4.93653 2.86878 8.45403 3.00453 12.4148C3.11253 15.5603 4.91103 18.4515 7.69953 19.959C7.80378 20.0153 7.91553 20.0415 8.02578 20.0415C8.27328 20.0415 8.51253 19.9073 8.63703 19.6718C8.81703 19.3305 8.69028 18.9068 8.35278 18.7245C5.99853 17.451 4.47978 15.015 4.38828 12.366C4.27953 9.19803 6.15828 6.36603 9.04353 5.17803L9.01578 6.75828C9.01203 7.00353 9.13503 7.23378 9.34128 7.36428C9.45303 7.43628 9.58053 7.47153 9.70878 7.47153ZM12.945 4.32678L10.422 5.62128L10.464 3.25278L12.945 4.32678ZM20.9948 11.808C20.8943 8.88753 19.3568 6.19653 16.8833 4.60878C16.5578 4.40103 16.1318 4.49778 15.927 4.82478C15.723 5.15103 15.8183 5.58378 16.1408 5.79078C18.2295 7.13103 19.5278 9.39828 19.6118 11.856C19.713 14.7945 18.0923 17.4705 15.5078 18.7905L15.4673 17.211C15.4598 16.9658 15.327 16.7423 15.1163 16.6208C14.9055 16.5 14.6468 16.4985 14.436 16.6193L9.67578 19.3208C9.44103 19.4543 9.30453 19.7123 9.32403 19.9838C9.34428 20.2545 9.51753 20.4893 9.76953 20.586L14.646 22.455C14.7263 22.485 14.8088 22.5 14.8913 22.5C15.0323 22.5 15.1733 22.4558 15.2918 22.371C15.48 22.236 15.5888 22.0148 15.5835 21.7823L15.546 20.3138C18.9488 18.8715 21.1223 15.516 20.9948 11.808ZM11.646 19.8075L14.112 18.408L14.1728 20.7758L11.646 19.8075Z"
      fill="#FF4100"
    />
  </svg>
  <main class="font-semibold text-lg text-p-text font-baloo">
    {{'account.ChangePassword'|translate}}
  </main>
</button>

<p-dialog
  header=""
  [modal]="true"
  [(visible)]="passwordVisible"
  [style]="{ width: 'min(95%, 600px)' }"
>
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmitPassword()"
    class="flex flex-col gap-6"
  >
    <h3 class="text-center">make sure its 8 characters or more</h3>

    @if (error()) {
    <div>
      <p-message severity="error" icon="pi pi-times-circle">
        {{error()}}
      </p-message>
    </div>
    }

    <div>
      <div class="relative">
        @let passwordCtrl = form.get("password");

        <app-base-input
          [control]="passwordCtrl"
          type="password"
          placeholder="Old password"
        />
        <span class="absolute left-4 top-1/2 -translate-y-1/2">
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15.8333 9.16669H4.16667C3.24619 9.16669 2.5 9.91288 2.5 10.8334V16.6667C2.5 17.5872 3.24619 18.3334 4.16667 18.3334H15.8333C16.7538 18.3334 17.5 17.5872 17.5 16.6667V10.8334C17.5 9.91288 16.7538 9.16669 15.8333 9.16669Z"
              stroke="#D3D3D3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M5.8335 9.16669V5.83335C5.8335 4.72828 6.27248 3.66848 7.05388 2.88708C7.83529 2.10567 8.89509 1.66669 10.0002 1.66669C11.1052 1.66669 12.165 2.10567 12.9464 2.88708C13.7278 3.66848 14.1668 4.72828 14.1668 5.83335V9.16669"
              stroke="#D3D3D3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </span>
      </div>

      <app-ctrl-error [inputCtrl]="passwordCtrl" fieldName="Password" />
    </div>

    <div>
      <div class="relative">
        @let newPasswordCtrl = form.get("newPassword");

        <app-base-input
          [control]="newPasswordCtrl"
          type="password"
          placeholder="New password"
        />

        <span class="absolute left-4 top-1/2 -translate-y-1/2">
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15.8333 9.16669H4.16667C3.24619 9.16669 2.5 9.91288 2.5 10.8334V16.6667C2.5 17.5872 3.24619 18.3334 4.16667 18.3334H15.8333C16.7538 18.3334 17.5 17.5872 17.5 16.6667V10.8334C17.5 9.91288 16.7538 9.16669 15.8333 9.16669Z"
              stroke="#D3D3D3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M5.8335 9.16669V5.83335C5.8335 4.72828 6.27248 3.66848 7.05388 2.88708C7.83529 2.10567 8.89509 1.66669 10.0002 1.66669C11.1052 1.66669 12.165 2.10567 12.9464 2.88708C13.7278 3.66848 14.1668 4.72828 14.1668 5.83335V9.16669"
              stroke="#D3D3D3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </span>
      </div>

      <app-ctrl-error [inputCtrl]="newPasswordCtrl" fieldName="New password" />
    </div>

    <app-submit-btn
      [isSubmitting]="isSubmitting()"
      label="Save"
      [disable]="form.invalid"
    />
  </form>
</p-dialog>
